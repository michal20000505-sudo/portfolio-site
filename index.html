<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Micha Jarosiski - Portfolio</title>
    <link rel="icon" type="image/png" href="strona-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #050505;
            --text-color: #ffffff;
            --cyan: #00ffff;
            --magenta: #ff00ff;
            --yellow: #ffff00;
            --font-main: 'Space Grotesk', sans-serif;
            --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            --ease-out: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        @media (hover: hover) and (pointer: fine) {
            * { cursor: none; }
        }

        body { 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            font-family: var(--font-main); 
            overflow-x: hidden; 
            line-height: 1.6; 
            position: relative; 
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { display: block; width: 100%; }

        /* --- Scroll Progress Bar --- */
        #progress-bar {
            position: fixed;
            top: 0; left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--cyan), var(--magenta), var(--yellow));
            width: 0%;
            z-index: 10001;
            transition: width 0.1s;
        }

        /* --- Ambient Background Glows --- */
        .ambient-glow {
            position: fixed;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
            z-index: -2;
            pointer-events: none;
            animation: floatGlow 15s infinite alternate ease-in-out;
        }
        .glow-1 { top: -10%; left: -10%; background: var(--cyan); }
        .glow-2 { bottom: 10%; right: -10%; background: var(--magenta); animation-delay: -5s; }
        .glow-3 { top: 40%; left: 40%; width: 400px; height: 400px; background: var(--yellow); opacity: 0.08; animation-delay: -10s; }

        @keyframes floatGlow {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, 30px) scale(1.1); }
            100% { transform: translate(-30px, -50px) scale(0.9); }
        }

        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        
        /* --- Cursor --- */
        .cursor { 
            width: 20px; height: 20px; border: 2px solid var(--text-color); border-radius: 50%; 
            position: fixed; pointer-events: none; z-index: 9999; transform: translate(-50%, -50%); 
            transition: transform 0.1s ease, background-color 0.2s, width 0.3s, height 0.3s; mix-blend-mode: difference; 
            display: none;
        }
        .cursor.hovered { transform: translate(-50%, -50%) scale(3); background-color: var(--text-color); border-color: transparent; opacity: 0.8; }
        
        .cursor-follower {
            width: 8px; height: 8px; background: var(--cyan); border-radius: 50%;
            position: fixed; pointer-events: none; z-index: 9998; transform: translate(-50%, -50%);
            transition: top 0.15s ease-out, left 0.15s ease-out;
            opacity: 0.6; display: none;
        }

        @media (hover: hover) and (pointer: fine) {
            .cursor, .cursor-follower { display: block; }
        }

        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); z-index: 10000; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease; }
        .loader-text { font-size: 2rem; font-weight: 700; animation: pulseCMYK 1s infinite alternate; }
        @keyframes pulseCMYK { 0% { text-shadow: 2px 2px 0 var(--cyan); } 50% { text-shadow: -2px 2px 0 var(--magenta); } 100% { text-shadow: -2px -2px 0 var(--yellow); } }

        .container { max-width: 1400px; margin: 0 auto; padding: 0 40px; }

        /* --- Header --- */
        header { position: fixed; top: 0; width: 100%; padding: 30px 0; z-index: 100; mix-blend-mode: difference; transition: padding 0.3s; }
        header.scrolled { padding: 15px 0; background: rgba(5,5,5,0.8); backdrop-filter: blur(10px); mix-blend-mode: normal; border-bottom: 1px solid rgba(255,255,255,0.1); }
        
        nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 700; font-size: 1.5rem; letter-spacing: -1px; z-index: 101; position: relative; } 
        .logo span { color: var(--cyan); }
        
        .nav-links { display: flex; gap: 50px; }
        .nav-links a { 
            font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; position: relative; 
            transition: transform 0.3s var(--ease-out);
            display: inline-block;
        }
        .nav-links a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--magenta); transition: var(--transition); }
        .nav-links a:hover::after { width: 100%; }
        /* Magnetic effect CSS base */
        .nav-links a:hover { color: var(--cyan); }

        .menu-toggle { display: none; flex-direction: column; gap: 6px; cursor: pointer; z-index: 101; }
        .bar { width: 30px; height: 2px; background-color: #fff; transition: 0.3s; }

        /* --- Hero --- */
        #hero { height: 100vh; display: flex; align-items: center; justify-content: center; position: relative; padding: 0 20px; overflow: hidden; }
        .hero-content { text-align: center; z-index: 2; width: 100%; perspective: 1000px; }
        
        .hero-title { 
            font-size: 8vw; font-weight: 700; line-height: 0.9; text-transform: uppercase; position: relative; color: var(--text-color);
            transform-style: preserve-3d;
        }
        .hero-title::before, .hero-title::after { content: 'CREATIVE\A DESIGNER'; white-space: pre; position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.8; }
        .hero-title::before { color: var(--cyan); z-index: -1; transform: translate(-3px, -3px); mix-blend-mode: screen; animation: glitch-anim-1 2.5s infinite linear alternate-reverse; }
        .hero-title::after { color: var(--magenta); z-index: -2; transform: translate(3px, 3px); mix-blend-mode: screen; animation: glitch-anim-2 3.5s infinite linear alternate-reverse; }
        @keyframes glitch-anim-1 { 0% { transform: translate(-2px, -2px); clip-path: inset(10% 0 80% 0); } 20% { clip-path: inset(60% 0 10% 0); } 100% { transform: translate(1px, 1px); clip-path: inset(40% 0 30% 0); } }
        @keyframes glitch-anim-2 { 0% { transform: translate(2px, 2px); clip-path: inset(80% 0 5% 0); } 20% { clip-path: inset(10% 0 60% 0); } 100% { transform: translate(-1px, -1px); clip-path: inset(20% 0 50% 0); } }
        
        .hero-subtitle { 
            margin-top: 30px; font-size: 1.2rem; color: #888; letter-spacing: 3px; text-transform: uppercase; 
            opacity: 0; animation: fadeUp 1s 1s forwards var(--ease-out);
        }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Sections & Animations --- */
        section { padding: 150px 0; position: relative; }
        
        .reveal { 
            opacity: 0; 
            transform: translateY(60px) scale(0.95); 
            transition: opacity 0.8s var(--ease-out), transform 0.8s var(--ease-out); 
        }
        .reveal.active { opacity: 1; transform: translateY(0) scale(1); }

        h2.section-title { font-size: 4rem; margin-bottom: 80px; border-bottom: 1px solid #333; padding-bottom: 20px; display: inline-block; position: relative; }
        h2.section-title::before {
            content: ''; position: absolute; bottom: -1px; left: 0; width: 0%; height: 1px; background: var(--cyan); transition: width 1s var(--ease-out);
        }
        .reveal.active h2.section-title::before { width: 50%; }
        h2.section-title span { color: var(--yellow); }

        /* --- About --- */
        .about-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 60px; align-items: center; }
        .about-image-wrapper { position: relative; width: 100%; max-width: 350px; perspective: 1000px; }

        .simple-zoom-container {
            position: relative; width: 100%; aspect-ratio: 1/1; overflow: hidden; border: 1px solid #333;
            transform-style: preserve-3d; transition: transform 0.2s ease-out;
        }

        .my-photo { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s var(--ease-out); }
        .simple-zoom-container:hover .my-photo { transform: scale(1.1); }

        .about-text { font-size: 1.15rem; color: #ddd; line-height: 1.8; font-weight: 300; text-align: justify; }
        .about-text p { margin-bottom: 20px; }
        
        .highlight-cyan { color: var(--cyan); font-weight: 500; text-shadow: 0 0 10px rgba(0,255,255,0.3); }
        .highlight-magenta { color: var(--magenta); font-weight: 500; text-shadow: 0 0 10px rgba(255,0,255,0.3); }
        .highlight-yellow { color: var(--yellow); font-weight: 500; text-shadow: 0 0 10px rgba(255,255,0,0.3); }
        .highlight-bold { color: #fff; font-weight: 700; }

        /* --- Projects (3D Tilt) --- */
        .project-item { 
            display: grid; grid-template-columns: 1.5fr 1fr; gap: 50px; margin-bottom: 150px; align-items: center; 
            perspective: 1500px;
        }
        .project-item:nth-child(even) { direction: rtl; }
        .project-item:nth-child(even) .project-info { direction: ltr; }
        
        .project-img-wrapper { 
            position: relative; overflow: hidden; border: 1px solid #222; 
            transition: transform 0.2s ease-out, border-color 0.4s, box-shadow 0.4s;
            transform-style: preserve-3d;
            border-radius: 4px;
        }

        /* 3D Glass Effect */
        .project-img-wrapper::after { 
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(135deg, rgba(0,255,255,0.2) 0%, rgba(255,0,255,0.2) 100%);
            opacity: 0; transition: opacity 0.4s; pointer-events: none; z-index: 1; mix-blend-mode: overlay;
        }

        .project-img-wrapper::before {
            content: 'Kliknij i zobacz moje prace graficzne';
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) translateZ(50px) scale(0.9); /* 3D pop */
            color: #fff; font-size: 1.5rem; font-weight: 700; text-align: center; text-transform: uppercase; letter-spacing: 1px;
            opacity: 0; z-index: 2; transition: all 0.4s var(--ease-out);
            text-shadow: 0 4px 10px rgba(0,0,0,0.8); pointer-events: none; width: 80%;
        }

        /* SSCAR Custom Text */
        #work .project-item:first-of-type .project-img-wrapper::before {
            content: 'Kliknij i zobacz stron przygotowan dla klienta';
        }

        .project-img-wrapper:hover { 
            border-color: var(--cyan); 
            box-shadow: 0 20px 50px -20px rgba(0, 255, 255, 0.2); 
        }
        .project-img-wrapper:hover::after { opacity: 1; }
        .project-img-wrapper:hover::before { opacity: 1; transform: translate(-50%, -50%) translateZ(60px) scale(1); }
        .project-img-wrapper:hover img { transform: scale(1.05); }

        .project-img-wrapper img { width: 100%; height: auto; transition: transform 0.6s var(--ease-out); display: block; }
        .project-img-wrapper a { display: block; width: 100%; height: 100%; cursor: pointer; transform-style: preserve-3d; }
        
        .project-info { transform: translateZ(30px); }
        .project-info h3 a { text-decoration: none; color: inherit; cursor: pointer; transition: color 0.3s; position: relative; display: inline-block; }
        .project-info h3 a::before {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: var(--cyan); transition: width 0.3s;
        }
        .project-info h3 a:hover { color: var(--cyan); }
        .project-info h3 a:hover::before { width: 100%; }
        
        .project-info h3 { font-size: 2.5rem; margin-bottom: 20px; color: var(--text-color); }
        .project-info p { color: #aaa; margin-bottom: 30px; font-size: 1.1rem; }
        .tags span { 
            display: inline-block; border: 1px solid #444; padding: 8px 15px; margin-right: 10px; font-size: 0.8rem; 
            text-transform: uppercase; border-radius: 50px; margin-bottom: 10px; transition: all 0.3s;
        }
        .tags span:hover { border-color: var(--magenta); color: var(--magenta); transform: translateY(-2px); }

        /* --- Services --- */
        .services-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; background: linear-gradient(90deg, var(--cyan), var(--magenta), var(--yellow)); }
        .service-card { 
            background-color: rgba(5, 5, 5, 0.95); padding: 60px 40px; height: 100%; transition: transform 0.2s ease-out, background 0.3s; 
            perspective: 1000px; transform-style: preserve-3d;
        }
        .service-card:hover { background-color: #000; z-index: 10; }
        .service-card h3 { font-size: 2rem; margin-bottom: 20px; transform: translateZ(20px); }
        .service-card p { transform: translateZ(10px); color: #ccc; }

        /* --- Contact --- */
        .cta-container { display: flex; flex-direction: column; gap: 30px; align-items: center; margin-top: 50px; perspective: 1000px; }
        .cta-big { 
            font-size: 4vw; font-weight: 700; line-height: 1.2; text-align: center; display: block; transition: all 0.4s var(--ease-out); word-break: break-all; 
            position: relative; z-index: 1;
        }
        .cta-small { font-size: 2rem; font-weight: 500; color: #ccc; letter-spacing: 2px; transition: all 0.4s; }
        .cta-big:hover { transform: scale(1.05) rotate(-2deg); color: var(--bg-color); text-shadow: -2px -2px 0 var(--cyan), 2px -2px 0 var(--cyan), -2px 2px 0 var(--cyan), 2px 2px 0 var(--cyan); }
        .cta-small:hover { color: var(--magenta); letter-spacing: 4px; }

        /* --- Mobile --- */
        @media (max-width: 1024px) {
            .container { padding: 0 20px; }
            section { padding: 80px 0; }
            h2.section-title { font-size: 2.8rem; margin-bottom: 50px; }
            
            .about-grid { grid-template-columns: 1fr; justify-items: center; gap: 40px; }
            .about-text { text-align: left; }
            
            .services-grid { grid-template-columns: 1fr; gap: 1px; background: linear-gradient(180deg, var(--cyan), var(--magenta), var(--yellow)); }
            
            .project-item, .project-item:nth-child(even) { grid-template-columns: 1fr; direction: ltr; margin-bottom: 80px; gap: 30px; }
            .project-item:nth-child(even) .project-info { direction: ltr; }
            .project-info h3 { font-size: 2rem; }
            
            .cta-big { font-size: 1.8rem; word-break: break-word; }
            .cta-small { font-size: 1.2rem; }
            
            .menu-toggle { display: flex; }
            .nav-links {
                position: fixed; top: 0; right: 0; height: 100vh; width: 70%; background: #0a0a0a; flex-direction: column; justify-content: center; align-items: center;
                transform: translateX(100%); transition: transform 0.4s ease-in-out; z-index: 99; border-left: 1px solid #222;
            }
            .nav-links.active { transform: translateX(0); }
            
            .menu-toggle.active .bar:nth-child(1) { transform: rotate(45deg) translate(6px, 6px); }
            .menu-toggle.active .bar:nth-child(2) { opacity: 0; }
            .menu-toggle.active .bar:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

            .hero-title { font-size: 13vw; }
            .hero-subtitle { font-size: 0.9rem; letter-spacing: 1px; }

            .project-img-wrapper::after { opacity: 0.3; }
            .project-img-wrapper::before { opacity: 1; font-size: 1.1rem; }
            
            /* Disable intense 3D tilts on mobile for performance */
            .project-img-wrapper, .service-card, .simple-zoom-container { transform: none !important; }
        }
    </style>
</head>
<body>

    <div id="progress-bar"></div>
    <div class="ambient-glow glow-1"></div>
    <div class="ambient-glow glow-2"></div>
    <div class="ambient-glow glow-3"></div>

    <canvas id="starfield"></canvas>
    
    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    
    <div id="preloader"><div class="loader-text">LOADING...</div></div>

    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo link-hover">MJ<span>.</span></a>
                
                <div class="menu-toggle" id="mobile-menu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>

                <div class="nav-links">
                    <a href="#about" class="link-hover magnet">O mnie</a>
                    <a href="#work" class="link-hover magnet">Web</a>
                    <a href="grafika.html" class="link-hover magnet">Grafika</a>
                    <a href="#contact" class="link-hover magnet">Kontakt</a>
                </div>
            </nav>
        </div>
    </header>

    <section id="hero">
        <div class="container hero-content">
            <div class="glitch-wrapper">
                <h1 class="hero-title" title="Creative Designer">CREATIVE<br>DESIGNER</h1>
            </div>
            <p class="hero-subtitle">Web Design / Branding / Art Direction</p>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <h2 class="section-title reveal">O <span>Mnie</span></h2>
            
            <div class="about-grid reveal">
                <div class="about-image-wrapper tilt-card">
                    <div class="simple-zoom-container link-hover">
                        <img src="JAzdj.jpg" alt="Micha Jar" class="my-photo">
                    </div>
                </div>

                <div class="about-text">
                    <p>Nazywam si Micha, od <span class="highlight-cyan">2014 roku</span> zajmuj si designem. Przez wikszo mojej kariery zajmowaem si g贸wnie <span class="highlight-magenta">brandingiem</span> i obsug social medi贸w mniejszych i wikszych firm a偶 po korporacje.</p>
                    <p>Aktualnie przyszed czas r贸wnie偶 na <span class="highlight-bold">strony internetowe</span>, a to co w tej chwili przegldasz jest ma prezentacj tego co mo偶na zrobi <span class="highlight-yellow">wzgldnie niewielkimi kosztami</span>, kiedy masz kreatywnego specjalist na wyczno.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="work">
        <div class="container">
            <h2 class="section-title reveal">Wybrane <span>Prace</span></h2>
            
            <div class="project-item reveal">
                <div class="project-img-wrapper link-hover tilt-card">
                    <a href="https://skpolanowice-sourceskp.github.io/sscar/" target="_blank">
                        <img src="sscar.jpg" alt="SSCAR Strona WWW">
                    </a>
                </div>
                <div class="project-info">
                    <h3><a href="https://skpolanowice-sourceskp.github.io/sscar/" target="_blank">SSCAR</a></h3>
                    <p>Strona wizyt贸wka dla serwisu samochodowego. Minimalistyczny design skupiony na czytelnoci oferty i szybkim kontakcie. Responsywny layout dostosowany do urzdze mobilnych.</p>
                    <div class="tags"><span>Web Design</span><span>Development</span></div>
                </div>
            </div>

            <div class="project-item reveal">
                <div class="project-img-wrapper link-hover tilt-card">
                    <a href="grafika.html">
                        <img src="digicamoblue-powder.jpg" alt="Portfolio Graficzne" onerror="this.src='render2.jpg'">
                    </a>
                </div>
                <div class="project-info">
                    <h3><a href="grafika.html">Portfolio Graficzne</a></h3>
                    <p>Pena kolekcja projekt贸w graficznych: branding, plakaty, DTP oraz materiay reklamowe. Zobacz wyselekcjonowane prace z lat 2014-2025.</p>
                    <div class="tags"><span>Branding</span><span>Print</span><span>Art Direction</span></div>
                </div>
            </div>
        </div>
    </section>

    <section id="services">
        <div class="container">
            <h2 class="section-title reveal">Moje <span>Usugi</span></h2>
            <div class="services-grid reveal">
                <div class="service-card tilt-card"><h3 style="color: var(--cyan)">Web Design</h3><p>Tworzenie stron, kt贸re nie tylko wygldaj, ale dziaaj. Responsywno, szybko i interaktywno to standard.</p></div>
                <div class="service-card tilt-card"><h3 style="color: var(--magenta)">Branding</h3><p>Projektowanie logo i identyfikacji wizualnej. Tworz marki, kt贸re krzycz z ekranu i zapadaj w pami.</p></div>
                <div class="service-card tilt-card"><h3 style="color: var(--yellow)">Development</h3><p>Wdra偶anie projekt贸w w 偶ycie. HTML5, CSS3, JavaScript oraz nowoczesne frameworki bez kompromis贸w.</p></div>
            </div>
        </section>

    <section id="contact">
        <div class="container" style="text-align: center;">
            <p class="reveal" style="color: #888; text-transform: uppercase; letter-spacing: 2px;">Rozpocznijmy wsp贸prac</p>
            <div class="cta-container reveal">
                <a href="mailto:graf.m.jar@gmail.com" class="cta-big link-hover magnet"><span style="color: var(--cyan)">graf.m.jar</span><span style="color: var(--magenta)">@</span><span style="color: var(--yellow)">gmail.com</span></a>
                <a href="tel:+48608078802" class="cta-small link-hover magnet">+48 608 078 802</a>
            </div>
        </div>
    </section>

    <script>
        // --- Preloader ---
        const preloader = document.getElementById('preloader');
        function hidePreloader() { if(preloader.style.opacity!=='0'){preloader.style.opacity='0'; setTimeout(()=>{preloader.style.display='none'},500);} }
        window.addEventListener('load', ()=>{setTimeout(hidePreloader,500)});
        if(document.readyState==='complete') hidePreloader();
        setTimeout(hidePreloader,3000);

        // --- Scroll Reveal ---
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

        // --- Header Scroll Effect & Progress Bar ---
        const header = document.querySelector('header');
        const progressBar = document.getElementById('progress-bar');
        
        window.addEventListener('scroll', () => {
            if(window.scrollY > 50) header.classList.add('scrolled');
            else header.classList.remove('scrolled');

            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            progressBar.style.width = scrolled + "%";
        });

        // --- Starfield ---
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width, height, stars = [];
        const mouse = { x: undefined, y: undefined };
        const colors = ['#00ffff', '#ff00ff', '#ffff00', '#ffffff', '#ffffff']; 

        function resize() { width=window.innerWidth; height=window.innerHeight; canvas.width=width; canvas.height=height; initStars(); }
        
        class Star {
            constructor() {
                this.x = Math.random() * width; this.y = Math.random() * height;
                this.size = Math.random() * 2;
                this.density = (Math.random() * 20) + 1;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.vx = (Math.random() - 0.5) * 0.5; this.vy = (Math.random() - 0.5) * 0.5;
                this.opacity = Math.random(); this.twinkle = Math.random() * 0.02 + 0.005;
            }
            draw() { ctx.fillStyle=this.color; ctx.globalAlpha=this.opacity; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1; }
            update() {
                this.x+=this.vx; this.y+=this.vy;
                if(this.x<0)this.x=width; if(this.x>width)this.x=0; if(this.y<0)this.y=height; if(this.y>height)this.y=0;
                if(mouse.x){
                    let dx=mouse.x-this.x, dy=mouse.y-this.y, dist=Math.sqrt(dx*dx+dy*dy);
                    if(dist<150){
                        let f=(150-dist)/150;
                        this.x-=(dx/dist)*f*this.density*2; this.y-=(dy/dist)*f*this.density*2;
                    }
                }
                this.opacity+=this.twinkle; if(this.opacity>1||this.opacity<0.2)this.twinkle=-this.twinkle;
            }
        }
        function initStars(){ stars=[]; for(let i=0;i<(width*height)/8000;i++)stars.push(new Star()); }
        function animateStars(){ ctx.clearRect(0,0,width,height); stars.forEach(s=>{s.draw();s.update()}); requestAnimationFrame(animateStars); }
        
        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', e=>{mouse.x=e.x; mouse.y=e.y});

        // --- Mobile Menu ---
        const menuToggle = document.getElementById('mobile-menu');
        const navLinks = document.querySelector('.nav-links');
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                menuToggle.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });
        
        // --- Cursor System ---
        const cursor = document.querySelector('.cursor');
        const cursorFollower = document.querySelector('.cursor-follower');
        
        if(window.matchMedia("(pointer: fine)").matches) {
            document.addEventListener('mousemove', e=>{
                cursor.style.left = e.clientX+'px'; 
                cursor.style.top = e.clientY+'px';
                
                // Op贸藕niony follower
                setTimeout(() => {
                    cursorFollower.style.left = e.clientX+'px'; 
                    cursorFollower.style.top = e.clientY+'px';
                }, 50);
            });

            document.querySelectorAll('.link-hover, a, button, .project-img-wrapper, .simple-zoom-container').forEach(l=>{
                l.addEventListener('mouseenter',()=>cursor.classList.add('hovered'));
                l.addEventListener('mouseleave',()=>cursor.classList.remove('hovered'));
            });

            // --- Magnetic Button Effect ---
            const magnets = document.querySelectorAll('.magnet');
            magnets.forEach((magnet) => {
                magnet.addEventListener('mousemove', (e) => {
                    const position = magnet.getBoundingClientRect();
                    const x = e.clientX - position.left - position.width / 2;
                    const y = e.clientY - position.top - position.height / 2;
                    
                    magnet.style.transform = `translate(${x * 0.3}px, ${y * 0.3}px)`;
                });
                magnet.addEventListener('mouseleave', () => {
                    magnet.style.transform = 'translate(0px, 0px)';
                });
            });

            // --- 3D Tilt Effect for Cards ---
            const tiltCards = document.querySelectorAll('.tilt-card');
            tiltCards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const rotateX = (y - centerY) / 20;
                    const rotateY = (centerX - x) / 20;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                });

                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                });
            });
        }

        // --- Visibility Change ---
        const normalTitle = "Micha Jarosiski - Portfolio";
        const awayTitle   = " Wr贸 do moich projekt贸w!";

        document.addEventListener("visibilitychange", () => {
            if (document.hidden) document.title = awayTitle;
            else document.title = normalTitle;
        });

        resize(); animateStars();
    </script>
</body>
</html>
