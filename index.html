<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PORTFOLIO | Visual Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- ZMIENNE KOLORYSTYCZNE --- */
        :root {
            --bg-color: #050505;
            --text-color: #ffffff;
            --cyan: #00ffff;
            --magenta: #ff00ff;
            --yellow: #ffff00;
            --font-main: 'Space Grotesk', sans-serif;
            --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        /* --- RESET I BAZA --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            overflow-x: hidden;
            line-height: 1.5;
            position: relative;
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { display: block; width: 100%; }

        /* --- CANVAS TŁA I EFEKTU ZDJĘCIA --- */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Tło */
            pointer-events: none;
        }

        /* --- CUSTOM CURSOR --- */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-color);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease, background-color 0.2s;
            mix-blend-mode: difference;
        }

        .cursor.hovered {
            transform: translate(-50%, -50%) scale(2.5);
            background-color: var(--text-color);
            border-color: transparent;
        }

        /* --- PRELOADER --- */
        #preloader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        
        .loader-text {
            font-size: 2rem;
            font-weight: 700;
            animation: pulseCMYK 1s infinite alternate;
        }

        @keyframes pulseCMYK {
            0% { text-shadow: 2px 2px 0 var(--cyan); }
            50% { text-shadow: -2px 2px 0 var(--magenta); }
            100% { text-shadow: -2px -2px 0 var(--yellow); }
        }

        /* --- LAYOUT --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
        }

        /* --- HEADER --- */
        header {
            position: fixed;
            top: 0; width: 100%; padding: 30px 0;
            z-index: 100;
            mix-blend-mode: difference;
        }

        nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 700; font-size: 1.5rem; letter-spacing: -1px; }
        .logo span { color: var(--cyan); }
        .nav-links { display: flex; gap: 50px; }
        .nav-links a { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; position: relative; }
        .nav-links a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--magenta); transition: var(--transition); }
        .nav-links a:hover::after { width: 100%; }

        /* --- HERO --- */
        #hero { height: 100vh; display: flex; align-items: center; justify-content: center; position: relative; }
        .hero-content { text-align: center; z-index: 2; }
        .hero-title { font-size: 8vw; font-weight: 700; line-height: 0.9; text-transform: uppercase; position: relative; color: var(--text-color); }
        .hero-title::before, .hero-title::after { content: 'CREATIVE\A DESIGNER'; white-space: pre; position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.8; }
        .hero-title::before { color: var(--cyan); z-index: -1; transform: translate(-3px, -3px); mix-blend-mode: screen; animation: glitch-anim-1 2s infinite linear alternate-reverse; }
        .hero-title::after { color: var(--magenta); z-index: -2; transform: translate(3px, 3px); mix-blend-mode: screen; animation: glitch-anim-2 3s infinite linear alternate-reverse; }
        @keyframes glitch-anim-1 { 0% { transform: translate(-2px, -2px); } 100% { transform: translate(1px, 1px); } }
        @keyframes glitch-anim-2 { 0% { transform: translate(2px, 2px); } 100% { transform: translate(-1px, -1px); } }
        .hero-subtitle { margin-top: 30px; font-size: 1.2rem; color: #888; letter-spacing: 3px; text-transform: uppercase; }

        /* --- SECTIONS --- */
        section { padding: 150px 0; position: relative; }
        .reveal { opacity: 0; transform: translateY(100px); transition: all 1s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }
        h2.section-title { font-size: 4rem; margin-bottom: 80px; border-bottom: 1px solid #333; padding-bottom: 20px; display: inline-block; }
        h2.section-title span { color: var(--yellow); }

        /* --- O MNIE (SPECJALNA STREFA DLA CANVAS) --- */
        .about-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 80px;
            align-items: start;
        }

        .canvas-trigger-area {
            width: 300px;
            height: 300px;
            border: 1px dashed rgba(255,255,255,0.2);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .trigger-hint {
            color: var(--cyan);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            pointer-events: none; /* Żeby nie blokowało hovera */
            transition: opacity 0.3s;
        }

        .canvas-trigger-area:hover .trigger-hint {
            opacity: 0; /* Ukryj napis gdy obraz się formuje */
        }

        .about-text { font-size: 1.1rem; color: #ccc; line-height: 1.8; }

        /* --- PORTFOLIO & SERVICES & CONTACT (Reszta styli bez zmian) --- */
        .project-item { display: grid; grid-template-columns: 1.5fr 1fr; gap: 50px; margin-bottom: 150px; align-items: center; }
        .project-item:nth-child(even) { direction: rtl; }
        .project-item:nth-child(even) .project-info { direction: ltr; }
        .project-img-wrapper { position: relative; overflow: hidden; border: 1px solid #222; }
        .project-img-wrapper::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--cyan); opacity: 0; mix-blend-mode: multiply; transition: var(--transition); }
        .project-img-wrapper:hover::after { opacity: 0.6; }
        .project-img-wrapper:hover img { transform: scale(1.1); filter: grayscale(100%); }
        .project-info h3 { font-size: 2.5rem; margin-bottom: 20px; color: var(--text-color); }
        .project-info p { color: #aaa; margin-bottom: 30px; font-size: 1.1rem; }
        .tags span { display: inline-block; border: 1px solid var(--text-color); padding: 8px 15px; margin-right: 10px; font-size: 0.8rem; text-transform: uppercase; border-radius: 50px; }

        .services-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; background: linear-gradient(90deg, var(--cyan), var(--magenta), var(--yellow)); }
        .service-card { background-color: rgba(5, 5, 5, 0.95); padding: 60px 40px; height: 100%; transition: var(--transition); }
        .service-card:hover { background-color: #000; }
        .service-card h3 { font-size: 2rem; margin-bottom: 20px; }

        .cta-container { display: flex; flex-direction: column; gap: 30px; align-items: center; margin-top: 50px; }
        .cta-big { font-size: 4vw; font-weight: 700; line-height: 1.2; text-align: center; display: block; transition: var(--transition); }
        .cta-small { font-size: 2rem; font-weight: 500; color: #ccc; letter-spacing: 2px; transition: var(--transition); }
        .cta-big:hover, .cta-small:hover { color: var(--bg-color); text-shadow: -1px -1px 0 var(--cyan), 1px -1px 0 var(--cyan), -1px 1px 0 var(--cyan), 1px 1px 0 var(--cyan); }
        
        footer { padding: 50px 0; text-align: center; border-top: 1px solid #222; margin-top: 100px; color: #666; font-size: 0.8rem; position: relative; z-index: 2; background-color: var(--bg-color); }

        @media (max-width: 1024px) {
            .about-grid { grid-template-columns: 1fr; justify-items: center; }
            .services-grid { grid-template-columns: 1fr; gap: 1px; }
            .project-item, .project-item:nth-child(even) { grid-template-columns: 1fr; direction: ltr; }
            .cta-big { font-size: 8vw; }
            .cta-small { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <!-- GŁÓWNY CANVAS (TŁO + EFEKT ZDJĘCIA) -->
    <canvas id="particle-canvas"></canvas>

    <!-- CUSTOM CURSOR -->
    <div class="cursor"></div>

    <!-- PRELOADER -->
    <div id="preloader">
        <div class="loader-text">LOADING...</div>
    </div>

    <!-- NAWIGACJA -->
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo link-hover">MJ<span>.</span></a>
                <div class="nav-links">
                    <a href="#about" class="link-hover">O mnie</a>
                    <a href="#work" class="link-hover">Projekty</a>
                    <a href="#contact" class="link-hover">Kontakt</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- HERO -->
    <section id="hero">
        <div class="container hero-content">
            <div class="glitch-wrapper">
                <h1 class="hero-title" title="Creative Designer">CREATIVE<br>DESIGNER</h1>
            </div>
            <p class="hero-subtitle reveal">Web Design / Branding / Art Direction</p>
        </div>
    </section>

    <!-- O MNIE (TU DZIEJE SIĘ MAGIA) -->
    <section id="about">
        <div class="container">
            <h2 class="section-title reveal">O <span>Mnie</span></h2>
            
            <div class="about-grid reveal">
                <!-- Puste miejsce, które aktywuje formowanie zdjęcia -->
                <div class="canvas-trigger-area" id="photo-trigger">
                    <span class="trigger-hint">NAJEDŹ ABY ZOBACZYĆ</span>
                </div>

                <div class="about-text">
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nibh augue, suscipit a, scelerisque sed, lacinia in, mi. Cras vel lorem. Etiam pellentesque aliquet tellus. Phasellus pharetra nulla ac diam. Quisque semper justo at risus.
                    </p>
                    <br>
                    <p>
                        Donec venenatis vulputate lorem. Maecenas vestibulum mollis diam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla facilisi. Sed lacus. Donec lectus. Nullam pretium nibh ut turpis. Nam bibendum.
                    </p>
                    <br>
                    <p style="color: var(--yellow);">
                        <strong>In hac habitasse platea dictumst. Suspendisse potenti.</strong>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- PORTFOLIO -->
    <section id="work">
        <div class="container">
            <h2 class="section-title reveal">Wybrane <span>Prace</span></h2>
            <div class="project-item reveal">
                <div class="project-img-wrapper link-hover">
                    <img src="https://placehold.co/800x600/111/FFF?text=Projekt+NEON" alt="Projekt 1">
                </div>
                <div class="project-info">
                    <h3>Neon Commerce</h3>
                    <p>Futurystyczny sklep internetowy z odzieżą streetwear. Pełen redesign UX/UI oraz wdrożenie animacji 3D.</p>
                    <div class="tags"><span>UI Design</span><span>WebGL</span></div>
                </div>
            </div>
            <div class="project-item reveal">
                <div class="project-img-wrapper link-hover">
                    <img src="https://placehold.co/800x600/111/FFF?text=App+Interface" alt="Projekt 2">
                </div>
                <div class="project-info">
                    <h3>Fintech App</h3>
                    <p>Minimalistyczna aplikacja finansowa. Główny nacisk na czytelność danych i ciemny tryb oszczędzający energię.</p>
                    <div class="tags"><span>Mobile App</span><span>UX Research</span></div>
                </div>
            </div>
        </div>
    </section>

    <!-- USŁUGI -->
    <section id="services">
        <div class="container">
            <h2 class="section-title reveal">Moje <span>Usługi</span></h2>
            <div class="services-grid reveal">
                <div class="service-card"><h3 style="color: var(--cyan)">Web Design</h3><p>Tworzenie stron, które nie tylko wyglądają, ale działają. Responsywność, szybkość i interaktywność to standard.</p></div>
                <div class="service-card"><h3 style="color: var(--magenta)">Branding</h3><p>Projektowanie logo i identyfikacji wizualnej. Tworzę marki, które krzyczą z ekranu i zapadają w pamięć.</p></div>
                <div class="service-card"><h3 style="color: var(--yellow)">Development</h3><p>Wdrażanie projektów w życie. HTML5, CSS3, JavaScript oraz nowoczesne frameworki bez kompromisów.</p></div>
            </div>
        </div>
    </section>

    <!-- KONTAKT -->
    <section id="contact">
        <div class="container" style="text-align: center;">
            <p class="reveal" style="color: #888; text-transform: uppercase; letter-spacing: 2px;">Rozpocznijmy współpracę</p>
            <div class="cta-container reveal">
                <a href="mailto:graf.m.jar@gmail.com" class="cta-big link-hover"><span style="color: var(--cyan)">graf.m.jar</span><span style="color: var(--magenta)">@</span><span style="color: var(--yellow)">gmail.com</span></a>
                <a href="tel:+48608078802" class="cta-small link-hover">+48 608 078 802</a>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">&copy; 2025 Michał Jar Portfolio. Designed with CMYK passion.</div>
    </footer>

    <!-- SKRYPTY LOGIKI -->
    <script>
        /**
         * LOGIKA:
         * 1. Wczytujemy obrazek JAzdj.jpg do niewidocznego canvasu w pamięci.
         * 2. Pobieramy dane o pikselach (kolor i pozycja).
         * 3. Tworzymy cząsteczki. Każda ma:
         *    - Pozycję "Home" (na zdjęciu)
         *    - Pozycję aktualną (losową na ekranie)
         * 4. Jeśli mysz jest nad #photo-trigger -> cząsteczki lecą do "Home".
         * 5. Jeśli nie -> cząsteczki latają losowo (efekt gwiazd).
         */

        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        const triggerArea = document.getElementById('photo-trigger');

        let particlesArray = [];
        let isHovering = false;
        
        // Zmienne do pozycjonowania zdjęcia na ekranie
        let imgX = 0;
        let imgY = 0;
        const imgSize = 300; // Rozmiar zdjęcia na canvasie (powinien pasować do CSS .canvas-trigger-area)

        // Preloader
        const preloader = document.getElementById('preloader');
        function hidePreloader() {
            if(!preloader || preloader.style.opacity === '0') return;
            preloader.style.opacity = '0';
            setTimeout(() => { preloader.style.display = 'none'; }, 500);
        }

        // 1. Wczytywanie obrazka
        const image = new Image();
        image.src = 'JAzdj.jpg'; 
        // WAŻNE: Obrazek musi być w tym samym folderze. 
        // Jeśli testujesz lokalnie bez serwera (file://), przeglądarka zablokuje dostęp do pikseli (CORS).
        
        image.onload = function() {
            // Po załadowaniu obrazka inicjujemy cząsteczki
            init();
            hidePreloader();
        };
        // Fallback gdyby obrazek się nie załadował (np. brak pliku)
        image.onerror = function() {
            console.warn("Brak pliku JAzdj.jpg - uruchamiam tryb samych gwiazd");
            hidePreloader();
            // Inicjalizujemy puste cząsteczki (tylko białe gwiazdy)
            initStarsOnly(); 
        };

        // Obsługa Triggera
        triggerArea.addEventListener('mouseenter', () => { isHovering = true; });
        triggerArea.addEventListener('mouseleave', () => { isHovering = false; });

        class Particle {
            constructor(x, y, color) {
                // Pozycja docelowa (na zdjęciu)
                this.homeX = x;
                this.homeY = y;
                
                // Pozycja aktualna (startowo losowa na ekranie)
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                
                // Ruch swobodny (gwiazdy)
                this.vx = (Math.random() - 0.5) * 1;
                this.vy = (Math.random() - 0.5) * 1;
                
                this.color = color;
                this.size = 2; // Rozmiar piksela
                this.baseSize = this.size;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.closePath();
                ctx.fill();
            }

            update() {
                if (isHovering) {
                    // TRYB FORMOWANIA ZDJĘCIA
                    // Obliczamy aktualną pozycję zdjęcia na ekranie (bo scrollujemy!)
                    const rect = triggerArea.getBoundingClientRect();
                    // Pozycja docelowa to (pozycja elementu HTML) + (współrzędna piksela wewnątrz zdjęcia)
                    let targetX = rect.left + this.homeX; 
                    let targetY = rect.top + this.homeY;

                    // Prosta fizyka dążenia do celu (Ease)
                    let dx = targetX - this.x;
                    let dy = targetY - this.y;
                    
                    this.x += dx * 0.1; // Szybkość formowania (0.1 = 10% dystansu na klatkę)
                    this.y += dy * 0.1;

                } else {
                    // TRYB SWOBODNY (TŁO)
                    this.x += this.vx;
                    this.y += this.vy;

                    // Odbijanie od krawędzi lub zawijanie
                    if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                    
                    // Interakcja z myszą (odpychanie jak wcześniej)
                    // ... (opcjonalnie można dodać, ale może to zakłócać przejście w tryb zdjęcia)
                }
            }
        }

        function init() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particlesArray = [];

            // Rysujemy obrazek na tymczasowym, małym canvasie w pamięci, aby pobrać dane
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = imgSize;
            tempCanvas.height = imgSize;

            // Rysujemy zdjęcie przeskalowane do 300x300
            // Zachowujemy proporcje (zakładając że JAzdj.jpg jest w miarę kwadratowe lub cropujemy)
            // Tu robimy "object-fit: cover" manualnie
            let sWidth = image.width;
            let sHeight = image.height;
            let sx = 0, sy = 0;
            if (sWidth > sHeight) {
                sx = (sWidth - sHeight) / 2;
                sWidth = sHeight;
            } else {
                sy = (sHeight - sWidth) / 2;
                sHeight = sWidth;
            }
            tempCtx.drawImage(image, sx, sy, sWidth, sHeight, 0, 0, imgSize, imgSize);

            // Pobieramy dane pikseli
            const pixels = tempCtx.getImageData(0, 0, imgSize, imgSize);
            const data = pixels.data; // Tablica [R, G, B, A, R, G, B, A, ...]

            // Przeskakujemy co np. 4 piksel, żeby nie zabić procesora (density)
            const gap = 4; 

            for (let y = 0; y < imgSize; y += gap) {
                for (let x = 0; x < imgSize; x += gap) {
                    const index = (y * imgSize + x) * 4;
                    const red = data[index];
                    const green = data[index + 1];
                    const blue = data[index + 2];
                    const alpha = data[index + 3];

                    // Ignorujemy przezroczyste piksele
                    if (alpha > 128) {
                        const color = `rgb(${red},${green},${blue})`;
                        particlesArray.push(new Particle(x, y, color));
                    }
                }
            }
            
            // Dodajemy trochę dodatkowych "luźnych" gwiazd CMYK, żeby tło nie było puste w trybie hover
            // Te nie będą częścią zdjęcia
            addBackgroundStars(200);
        }

        // Dodatkowe gwiazdy tła (niezależne od zdjęcia)
        let backgroundStars = [];
        function addBackgroundStars(count) {
            const colors = ['#00ffff', '#ff00ff', '#ffff00', '#ffffff'];
            for(let i=0; i<count; i++) {
                backgroundStars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 2,
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
            }
        }
        
        // Funkcja fallbackowa (gdy brak zdjęcia)
        function initStarsOnly() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            addBackgroundStars(500); // Dużo gwiazd
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. Rysuj i aktualizuj cząsteczki zdjęcia
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].draw();
                particlesArray[i].update();
            }

            // 2. Rysuj gwiazdy tła (zawsze swobodne)
            for (let star of backgroundStars) {
                ctx.fillStyle = star.color;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                star.x += star.vx;
                star.y += star.vy;
                if(star.x < 0) star.x = canvas.width;
                if(star.x > canvas.width) star.x = 0;
                if(star.y < 0) star.y = canvas.height;
                if(star.y > canvas.height) star.y = 0;
            }

            requestAnimationFrame(animate);
        }

        animate();

        // Obsługa zmiany rozmiaru okna
        window.addEventListener('resize', function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            // W idealnym świecie powinniśmy przeliczyć pozycje, ale dla uproszczenia
            // cząsteczki same się odnajdą dzięki getBoundingClientRect w update()
        });
        
        // Obsługa Custom Cursor
        const cursor = document.querySelector('.cursor');
        const links = document.querySelectorAll('.link-hover, a, button, .project-img-wrapper, .canvas-trigger-area');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        links.forEach(link => {
            link.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            link.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });
        
        // Scroll Reveal
        const revealElements = document.querySelectorAll('.reveal');
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
        }, { threshold: 0.15 });
        revealElements.forEach(el => revealObserver.observe(el));

    </script>
</body>
</html>
